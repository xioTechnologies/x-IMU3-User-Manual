\section{Data logger}
\label{sec:dataLogger}

The x-IMU3 can function as a stand-alone data logger by streaming real-time data to a file on the \ac{microSD}.  Files created by the data logger use the .ximu3 extension and can be downloaded from the x-IMU3 to be converted to \ac{CSV} files using the product software.

The data logger will create a new file in the \enquote{Data Logger} directory on the \ac{microSD} each time logging starts.  Files will never be overwritten or deleted by the data logger.  If the \ac{microSD} becomes full then the data logger will stop and the x-IMU3 will indicate an error.

\subsection{Start and stop}

The data logger is enabled or disabled in the device settings.  If the data logger is enabled then logging will start when the x-IMU3 is switched on and stop when the x-IMU3 is switched off.  Alternatively, an application can start and stop logging remotely by enabling and disabling the data logger while the x-IMU3 is switched on.

\subsection{File name}
\label{sec:fileName}

The file name format is \enquote{prefix\_YYYY-MM-DD\_hh-mm-ss\_CCCC.ximu3} where where "prefix" is a user-defined label configured in the device settings, \enquote{YYYY-MM-DD\_hh-mm-ss} is the time that the file was created, and \enquote{CCCC} is a counter.  If the prefix is left blank then the device serial number will be used with the format \enquote{XXXXXXXX}.  The time and counter parts of the file name can be individually enabled or disabled in the device settings.  For example, if the counter was disabled and the prefix left blank for an x-IMU3 with the serial number \enquote{01234567} then a file created at 3.30 p.m. on January 20, 2025 would have the name \enquote{01234567\_2025-01-20\_15-30-00.ximu3}.

The counter is a four digit number between 0000 and 9999 that increments each time it is used.  If a file name using the counter already exists then the counter will increment until the file name is available.  Incrementing beyond 9999 will cause the counter to wraparound to 0000.  If the counter part of the file name is disabled and the file name already exists then the counter will used automatically to create an available file name.

\subsection{File contents}

The contents of the file is a byte stream as per the communication protocol described in \Fref{sec:communicationProtocol}.  Each file starts with a preamble of the following messages, in order.

\begin{enumerate}[nolistsep]
    \item Ping response
    \item Write time command
    \item Write setting command for each setting
\end{enumerate}

\subsection{Maximum file size and period}
\label{sec:maximumFileSizeAndPeriod}

A maximum file size and maximum file period can be configured in the device settings.  The data logger will start a new file each time the file size reaches the maximum file size, or the period since the start of the file reaches the maximum file period.

\subsection{Downloading files}

Data logger files can be download by \ac{USB} or Wi-Fi.  The \ac{microSD} appears as an external drive when \ac{USB} is connected.  The \ac{microSD} cannot be accessed while the data logger is enabled.  The contents of the \enquote{Data Logger} directory on the \ac{microSD} can be accessed by Wi-Fi by typing in the x-IMU3's \ac{IP} address to a browser.  This directory cannot be accessed while the data logger is enabled.
